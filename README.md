# KPO_HW4

Проект запускается с использованием Docker Compose.

### Сервис авторизации пользователей

- Порт: 8080
- База данных: postgres-auth-db на порту 5433

#### Функциональность:
1. Регистрация новых пользователей
2. Аутентификация пользователей по электронной почте и паролю, возвращает JWT токен
3. Получение информации об аутентифицированном пользователе по JWT токену из заголовка запроса
    - В Swagger UI токен нужно вставлять в окно в правом верхнем углу
4. Поддержка Springdoc (Swagger UI доступен по адресу: [http://localhost:8080/swagger-ui/index.html](http://localhost:8080/swagger-ui/index.html))
5. Миграция базы данных с помощью Flyway
6. Полная спецификация микросервиса

### Сервис продажи билетов

- Порт: 9090
- База данных: postgres-order-db на порту 5434

#### Функциональность:
1. Создание заказа для аутентифицированных пользователей с использованием JWT токена
    - В Swagger UI токен нужно вставлять в окно в правом верхнем углу
2. Получение данных о заказе по его ID
3. Обновление статуса созданного заказа в отдельном потоке
4. Добавление новых станций
5. Поддержка Springdoc (Swagger UI доступен по адресу: [http://localhost:9090/swagger-ui/index.html](http://localhost:9090/swagger-ui/index.html))
6. Миграция базы данных с помощью Flyway
7. Полная спецификация микросервиса

### Общая архитектура

1. В проекте два сервиса: сервис авторизации пользователей (User App) и сервис заказов на покупку билетов (Order App).
2. У каждого сервиса своя база данных (Postgres) в отдельном контейнере.
3. При регистрации пользователей, User App сохраняет данные о них в базу данных.
4. При авторизации пользователей, User App сохраняет данные о сессии в базу данных.
5. При создании новой станции, Order App сохраняет данные о станции в базу данных.
6. При создании нового заказа, Order App запрашивает информацию о пользователе у User App и сохраняет данные о заказе в базу данных.

### Используемые технологии

- `spring-boot-starter-parent` (версия: 3.2.5)
- `spring-boot-starter-data-jpa` - для работы с базой данных
- `spring-boot-starter-security` - для аутентификации пользователей
- `spring-boot-starter-web`
- `flyway-core` - для миграции базы данных
- `postgresql` (scope: runtime) - для работы с базой данных
- `springdoc-openapi-starter-webmvc-ui` (версия: 2.3.0) - для интерфейса и генерации документации
- `jjwt` (версия: 0.9.1) - для создания JWT токенов
- `spring-boot-starter-validation` - для валидации входных данных
- `okhttp` - для отправки HTTP запросов
- `gson` - для десериализации JSON данных
